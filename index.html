<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>범죄 두려움 인식 조사</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR&family=Roboto:wght@700&display=swap');
    body { margin: 0; font-family: 'Noto Sans KR', sans-serif; background: url('https://cdn.pixabay.com/photo/2017/01/30/13/50/city-2026823_1280.jpg') no-repeat center center fixed; background-size: cover; }
    .overlay { background-color: rgba(255, 255, 255, 0.9); min-height: 100vh; padding: 40px 20px; }
    h1 { text-align: center; font-family: 'Roboto', sans-serif; font-size: 2.2em; color: #2c3e50; margin-bottom: 1em; }
    form { background: white; max-width: 800px; margin: 0 auto; padding: 30px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    .page { display: none; }
    .page.active { display: block; }
    p { font-weight: 600; color: #34495e; }
    select, input[type="text"], input[type="tel"], textarea { width: 100%; padding: 10px; font-size: 1em; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 1em; box-sizing: border-box; }
    label { display: block; margin: 10px 0; }
    iframe { border: none; border-radius: 8px; }
    .iframe-pair { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
    .iframe-pair iframe { width: 400px; height: 300px; }
    .single-iframe { text-align: center; margin-bottom: 20px; }
    .single-iframe iframe { width: 600px; height: 400px; }
    .navigation { display: flex; justify-content: space-between; margin-top: 20px; }
    button { background-color: #2c3e50; color: white; border: none; padding: 10px 20px; font-size: 1em; border-radius: 6px; cursor: pointer; }
    button:hover { background-color: #1a242f; }
    #submitBtn { margin-left: auto; display: block; background-color: #27ae60; }
  .likert-scale { display: flex; justify-content: space-between; margin: 10px 0 20px; }
.likert-scale label { flex: 1; text-align: center; }
.likert-scale input[type="radio"] { display: none; }
.likert-scale span { display: inline-block; width: 100%; padding: 10px; border-radius: 20px; background: #eee; cursor: pointer; }
.likert-scale input[type="radio"]:checked + span { background: #2c3e50; color: white; font-weight: bold; }
</style>
</head>
<body>
  <div class="overlay">
    <form id="surveyForm">
      <h1>범죄 두려움 인식 조사</h1>
      <!-- 페이지 1: 동의 -->
      <div class="page active">
        <p>이 설문조사는 한양대학교 도시공학과 졸업 논문 데이터 수집을 위한 조사입니다.<br>성실한 응답 부탁드립니다.</p>
        <p><strong>귀하는 개인정보 활용에 동의하십니까?</strong></p>
        <label><input type="radio" name="consent" value="yes" required> 예</label>
        <label><input type="radio" name="consent" value="no"> 아니오</label>
      </div>
      <!-- 페이지 2: 연령, 거주지, 성별 -->
      <div class="page">
        <p>1. 귀하의 연령대를 선택해 주십시오.</p>
        <select name="age" required>
          <option value="">선택하세요</option>
          <option value="10">10대</option>
          <option value="20">20대</option>
          <option value="30">30대</option>
          <option value="40">40대</option>
          <option value="50">50대</option>
          <option value="60+">60대 이상</option>
        </select>
        <p>2. 귀하의 거주지를 입력해 주십시오.</p>
        <input type="text" name="location" required>
        <p>3. 귀하의 성별을 선택해 주십시오.</p>
        <label><input type="radio" name="gender" value="male" required> 남성</label>
        <label><input type="radio" name="gender" value="female"> 여성</label>
      </div>
      <div class="navigation" id="navigationButtons">
  <button type="button" id="prevBtn">이전</button>
  <button type="button" id="nextBtn">다음</button>
</div>
    </form>
  </div>
  <script>
const form = document.getElementById("surveyForm");
const pages = () => document.querySelectorAll(".page");
let current = 0;

const pairURLs = [
  ["https://www.google.com/maps/embed?pb=!4v1746606916717!6m8!1m7!1sqIcfF28WOqHRG8ck9y0opw!2m2!1d37.52558963555771!2d127.0399753672807!3f9.12958550147545!4f1.3656251832911863!5f0.7820865974627469", "https://www.google.com/maps/embed?pb=!4v1746606991650!6m8!1m7!1sM6y5ydFFyQQoFOw-Q9m4Gw!2m2!1d37.52614969445447!2d127.038275227252!3f116.3699640601421!4f-5.2375983588488!5f0.7820865974627469"],
  ["https://www.google.com/maps/embed?pb=!4v1746607063388!6m8!1m7!1sIlkGN8aszSAHpNYqSIsEGA!2m2!1d37.50662738630236!2d127.1060932659381!3f12.382805283631114!4f4.852142398992271!5f0.7820865974627469", "https://www.google.com/maps/embed?pb=!4v1746607112463!6m8!1m7!1so0NsPsdQHtsiHNCsnXAbXg!2m2!1d37.51473446300329!2d127.1090360654833!3f252.26910849813157!4f3.003004770538695!5f0.7820865974627469"],
  ["https://www.google.com/maps/embed?pb=!4v1746607263391!6m8!1m7!1saChJJT6Yf9wdi0suICvwMg!2m2!1d37.48563221961786!2d126.9294831173094!3f134.69943805759826!4f-1.604294074600901!5f0.7820865974627469", "https://www.google.com/maps/embed?pb=!4v1746607293977!6m8!1m7!1sP_i_sqipEw7emiWw08Es8A!2m2!1d37.48583536299896!2d126.9264602960406!3f351.18147958827694!4f3.047004527898835!5f0.7820865974627469"],
  ["https://www.google.com/maps/embed?pb=!4v1746607399818!6m8!1m7!1sq1AEI1OqDgGKyLXiOErjdg!2m2!1d37.48355123712464!2d126.9819396449714!3f188.6797366159852!4f3.3364479864773813!5f0.7820865974627469", "https://www.google.com/maps/embed?pb=!4v1746607432918!6m8!1m7!1sMs9p6M_iZ5EAF4AXbkpxCw!2m2!1d37.47937094728489!2d126.9829175419019!3f99.65663549791554!4f-3.3733382568631924!5f0.7820865974627469"]
];

pairURLs.forEach(([left, right], idx) => {
  const div = document.createElement("div");
  div.className = "page";
  div.innerHTML = `
    <p>${idx + 3}. 다음 두 장소 중에서 더 안전하다고 느끼시는 장소를 선택해 주세요.</p>
    <div class="iframe-pair">
      <iframe src="${left}" loading="lazy"></iframe>
      <iframe src="${right}" loading="lazy"></iframe>
    </div>
    <label><input type="radio" name="pair_${idx}" value="left" required> 왼쪽이 더 안전함</label>
    <label><input type="radio" name="pair_${idx}" value="right"> 오른쪽이 더 안전함</label>
    <p>선택하신 이유를 간단히 적어주세요.</p>
    <textarea name="pair_reason_${idx}" rows="3" required></textarea>
  `;
  document.getElementById("surveyForm").insertBefore(div, document.querySelector(".navigation"));
});

document.getElementById("nextBtn").addEventListener("click", () => {
  const currentPage = pages()[current];
  const inputs = currentPage.querySelectorAll("input, select, textarea");
  let allFilled = true;
  inputs.forEach(input => {
    if ((input.required && !input.value) || (input.type === "radio" && !currentPage.querySelector(`input[name="${input.name}"]:checked`))) {
      allFilled = false;
    }
  });
  if (!allFilled) {
    alert("모든 문항에 응답해 주십시오.");
    return;
  }
  if (current < pages().length - 1) {
    pages()[current].classList.remove("active");
    pages()[++current].classList.add("active");
  }
});

document.getElementById("prevBtn").addEventListener("click", () => {
  if (current > 0) {
    pages()[current].classList.remove("active");
    pages()[--current].classList.add("active");
  }
});
// 스트릿뷰 단일 평가 8페이지 추가
const soloURLs = pairURLs.flat();
soloURLs.forEach((url, idx) => {
  const div = document.createElement("div");
  div.className = "page";
  div.innerHTML = `
    <p>다음 장소에 대한 인식을 평가해 주세요. (${idx + 1}/8)</p>
    <div class="single-iframe">
      <iframe src="${url}" loading="lazy"></iframe>
    </div>
    <p>1. 절도 범죄로부터 이 장소가 얼마나 안전하다고 느끼십니까?</p>
    ${[1, 2, 3, 4].map(i => `<label><input type="radio" name="q1_${idx}" value="${i}" required> ${i}점</label>`).join('')}
    <textarea name="r1_${idx}" placeholder="이유를 간단히 입력해 주세요." rows="2" required></textarea>

    <p>2. 이 장소가 얼마나 활기차다고 느끼십니까?</p>
    ${[1, 2, 3, 4].map(i => `<label><input type="radio" name="q2_${idx}" value="${i}" required> ${i}점</label>`).join('')}
    <textarea name="r2_${idx}" placeholder="이유를 간단히 입력해 주세요." rows="2" required></textarea>

    <p>3. 이 장소에서 귀하가 보호받고 있다고 느끼십니까?</p>
    ${[1, 2, 3, 4].map(i => `<label><input type="radio" name="q3_${idx}" value="${i}" required> ${i}점</label>`).join('')}
    <textarea name="r3_${idx}" placeholder="이유를 간단히 입력해 주세요." rows="2" required></textarea>

    <p>4. 이 장소에서 감시당하고 있다는 느낌이 드십니까?</p>
    ${[1, 2, 3, 4].map(i => `<label><input type="radio" name="q4_${idx}" value="${i}" required> ${i}점</label>`).join('')}
    <textarea name="r4_${idx}" placeholder="이유를 간단히 입력해 주세요." rows="2" required></textarea>
  `;
  document.getElementById("surveyForm").insertBefore(div, document.querySelector(".navigation"));
});

// 전화번호 입력 페이지
const phonePage = document.createElement("div");
phonePage.className = "page";
phonePage.innerHTML = `
  <p>마지막으로, 연락 가능한 전화번호를 입력해 주세요.</p>
  <input type="tel" name="phone" placeholder="010-0000-0000" required>
  <button type="submit" id="submitBtn">제출</button>
`;
document.getElementById("surveyForm").insertBefore(phonePage, document.querySelector(".navigation"));

form.addEventListener("submit", (e) => {
  e.preventDefault();
  document.querySelector(".navigation").style.display = 'none';
  form.innerHTML = '<h1>설문이 완료되었습니다. 감사합니다!</h1>';
});
</script>
</body>
</html>
